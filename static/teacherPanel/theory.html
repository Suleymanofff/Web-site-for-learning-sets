<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Панель учителя — Теория</title>
		<link rel="stylesheet" href="/static/teacherPanel/style.css" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
		/>
		<script src="/static/js/theme-init.js"></script>
		<script src="/static/teacherPanel/script.js" defer></script>
	</head>
	<body>
		<header class="navbar">
			<div class="logo" onclick="navigate('index.html')">Set Learn</div>
			<nav class="nav-links">
				<a href="/static/mainPage/index.html">Главная</a>
				<a href="index.html">Панель учителя</a>
				<a href="courses.html">Курсы</a>
				<a href="tests.html">Тесты</a>
				<a href="questions.html">Вопросы</a>
				<a href="theory.html" class="active">Теория</a>
			</nav>
			<div class="actions">
				<button id="theme-toggle" aria-label="Переключить тему"></button>
				<div class="user-icon" onclick="navigate('/profile')">
					<img src="/static/img/userDefault.png" alt="userDefault" />
				</div>
			</div>
		</header>

		<main class="page-content">
			<h1 id="page-title">Управление теорией</h1>

			<!-- Форма быстрого создания новой темы -->
			<form id="newTheoryForm" class="course-form">
				<select id="theoryCourseSelect" name="course_id" required>
					<option value="" disabled selected>Выберите курс</option>
					<!-- JS вставит опции курсов -->
				</select>
				<input
					type="text"
					id="new-theory-title"
					name="title"
					placeholder="Название темы"
					required
				/>
				<div
					id="new-theory-content"
					class="rte"
					contenteditable="true"
					placeholder="Текст теории"
				></div>
				<button type="submit" class="btn btn-primary">
					<i class="fas fa-plus"></i> Создать
				</button>
			</form>

			<!-- Таблица существующих тем -->
			<div class="table-wrapper">
				<table id="theory-table">
					<thead>
						<tr>
							<th>Название</th>
							<th>Содержимое</th>
							<th>Курс</th>
							<th>Дата создания</th>
							<th>Редактировать</th>
							<th>Сохранить</th>
							<th>Удалить</th>
						</tr>
					</thead>
					<tbody id="theoryBody">
						<!-- JS вставит сюда строки -->
					</tbody>
				</table>
			</div>
		</main>

		<!-- Большая модалка редактирования -->
		<div id="theoryModal" class="modal hidden">
			<div class="modal-backdrop"></div>
			<div class="modal-content">
				<span class="close" id="closeTheoryIcon">&times;</span>
				<h2 id="modalTitle">Редактировать тему</h2>
				<form id="theoryForm">
					<div class="form-group">
						<label for="edit-course">Курс</label>
						<select id="edit-course" required>
							<!-- сюда JS вставит опции -->
						</select>
					</div>
					<div class="form-group">
						<label for="edit-title">Заголовок</label>
						<input id="edit-title" type="text" required />
					</div>
					<div class="form-group">
						<label for="edit-content">Содержимое</label>
						<div id="edit-content" class="rte" contenteditable="true"></div>
					</div>
					<div class="modal-actions">
						<button type="submit" class="btn btn-primary">Сохранить</button>
						<button
							type="button"
							class="btn btn-secondary"
							id="cancelTheoryBtn"
						>
							Отмена
						</button>
					</div>
				</form>
			</div>
		</div>
		<!-- Мини-модалка «Есть несохранённые изменения?» -->
		<div id="unsaved-modal" class="modal hidden">
			<div class="modal-backdrop"></div>
			<div class="modal-content">
				<p>Вы не сохранили изменения. Закрыть без сохранения?</p>
				<div class="modal-actions">
					<button id="force-close-btn" class="btn btn-danger">
						Всё равно закрыть
					</button>
					<button id="cancel-close-btn" class="btn btn-secondary">
						Отмена
					</button>
				</div>
			</div>
		</div>
	</body>
</html>
